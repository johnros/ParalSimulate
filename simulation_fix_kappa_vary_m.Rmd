---
title: "Fix kapa (high dim)"
author: "Jonathan Rosenblatt"
date: "13/1/2014"
output: html_document
---

## Initializing and testing
```{r Initializing}
## for hezi-rack: 
# .libPaths('~/R/x86_64-unknown-linux-gnu-library/')
library(InformationAndInference)
```



## OLS
```{r OLS testing}
configurations <- makeConfiguration(reps = 5e1, m = c(5e0, 5e1), p = 1e2, n = c(1.5e2, 2e2, 4e2) , kappa = 1, lambda = 10, model = my.ols, link = identity, sigma = 1e1, beta.maker = makeBetasDeterministic, beta.star.maker = identityBeta) 
configurations %>% dim
.MSEs.0 <- apply(configurations, 1, replicateMSE_fixKappa)
MSEs.framed.0 <- frameMSEs(.MSEs.0, configurations)
MSEs.framed.0 %>% select(n, average, std.dev)
plotMSEs(MSEs.framed.0, 'test', y.lim=c(0.9,4))
```


```{r}
configurations <- makeConfiguration(
  reps = 5e1, 
  m = c(5e0, 5e1), 
  p = 1e2, 
  n = c(1.5e2, 2e2), 
  kappa = 1, 
  lambda = 10, 
  model = my.ols, link = identity, sigma = 1e1, 
  beta.maker = makeBetasDeterministic, beta.star.maker = identityBeta) 

cl <- makeCluster(30)
clusterEvalQ(cl, {
  .libPaths('~/R/x86_64-unknown-linux-gnu-library/')
  library(InformationAndInference)
  })
MSEs.0 <- parApply(cl, configurations, 1, replicateMSE)
stopCluster(cl)
```

```{r saving}
save(MSEs.0, configurations, file='RData/MSEs.0.RData')
```

```{r plot_1, eval=FALSE, echo=FALSE}
MSEs.framed.0 <- frameMSEs(MSEs.0, configurations)
plotMSEs(MSEs.framed.0, 'test')
```

